import sys
import numpy as np
import numpy
import sip
sip.setapi('QString', 2)
sip.setapi('QVariant', 2)
from PyQt4 import QtGui, QtCore
from PyQt4.QtGui import QApplication, QLineEdit

atoms=np.genfromtxt('dump.coordss', delimiter=" ", names=True)
numatoms=len(atoms)
xa=atoms['x']
ya=atoms['y']

class MyWindow(QtGui.QWidget):
    def __init__(self, parent=None):
        super(MyWindow, self).__init__(parent)

        for i in range(numatoms):
            self.b =QtGui.QPushButton(self)
            self.b.resize(8,8)
            self.b.move(25+xa[i]*10,25+ya[i]*10)
            self.b.setStyleSheet("QPushButton { background-color: light}")  
            self.b.setCheckable(True)
            self.b.toggle() 
            if self.b.isChecked():
                self.b.setStyleSheet("QPushButton { background-color: green }")    
            self.b.clicked.connect(self.on_b_clicked)    
        self.e1 = QLineEdit(self)
        #self.e1.setAlignment(Qt.AlignLeft)
        self.e1.resize(25+xa[7998]*10,100)
        self.e1.move(25,40+ya[7998]*10)
        self.e1.returnPressed.connect(self.b.click)

#@QtCore.pyqtSlot()
    def on_b_clicked(self):
        data=self.e1.toPlainText()
        print data
        

   
   #flo = QFormLayout(win)
   #flo.addRow("position of atoms", e1)
   #pb = QPushButton()
   #pb.setObjectName("connect")
   #pb.setText("Connect")

app=QApplication(sys.argv)
w=MyWindow()
w.show()
sys.exit(app.exec_())
if __name__ == '__main__':
   MyWindow()

